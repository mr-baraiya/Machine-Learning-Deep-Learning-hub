
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardiovascular Disease Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark);
            
            // Update button icon
            const btn = document.getElementById('darkModeToggle');
            btn.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        }
        
        // Load dark mode preference on page load
        document.addEventListener('DOMContentLoaded', function() {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark-mode');
                const btn = document.getElementById('darkModeToggle');
                if (btn) btn.textContent = '‚òÄÔ∏è';
            }
        });
        
        function fillDemoData(demo) {
            if (demo === 1) {
                // Low Risk Demo Data
                document.getElementById('age_years').value = 45;
                document.getElementById('height').value = 170;
                document.getElementById('weight').value = 68;
                document.getElementById('ap_hi').value = 115;
                document.getElementById('ap_lo').value = 75;
                document.getElementById('cholesterol').value = 1;
                document.getElementById('gluc').value = 1;
                document.getElementById('smoke').value = 0;
                document.getElementById('alco').value = 0;
                document.getElementById('active').value = 1;
            } else if (demo === 2) {
                // High Risk Demo Data
                document.getElementById('age_years').value = 62;
                document.getElementById('height').value = 165;
                document.getElementById('weight').value = 95;
                document.getElementById('ap_hi').value = 160;
                document.getElementById('ap_lo').value = 105;
                document.getElementById('cholesterol').value = 3;
                document.getElementById('gluc').value = 3;
                document.getElementById('smoke').value = 1;
                document.getElementById('alco').value = 1;
                document.getElementById('active').value = 0;
            }
        }
        
        // Real-time validation
        function validateInput(input) {
            const value = parseFloat(input.value);
            const field = input.id;
            let isValid = true;
            let message = '';
            
            // Clear previous error
            input.classList.remove('input-error');
            const existingError = input.parentElement.querySelector('.validation-error');
            if (existingError) existingError.remove();
            
            // Validation rules
            switch(field) {
                case 'age_years':
                    if (value < 1 || value > 120) {
                        isValid = false;
                        message = '‚ö†Ô∏è Please enter a valid age (1-120 years)';
                    } else if (value < 18) {
                        message = '‚ÑπÔ∏è This tool is designed for adults';
                    }
                    break;
                case 'height':
                    if (value < 100) {
                        isValid = false;
                        message = '‚ö†Ô∏è Height seems too low (minimum 100 cm)';
                    } else if (value > 250) {
                        isValid = false;
                        message = '‚ö†Ô∏è Height seems too high (maximum 250 cm)';
                    }
                    break;
                case 'weight':
                    if (value < 30) {
                        isValid = false;
                        message = '‚ö†Ô∏è Weight seems too low (minimum 30 kg)';
                    } else if (value > 300) {
                        isValid = false;
                        message = '‚ö†Ô∏è Weight seems too high (maximum 300 kg)';
                    }
                    break;
                case 'ap_hi':
                    if (value < 70 || value > 250) {
                        isValid = false;
                        message = '‚ö†Ô∏è Systolic BP should be between 70-250 mmHg';
                    } else if (value < 90 || value > 180) {
                        message = '‚ÑπÔ∏è Consider consulting a doctor if BP is unusual';
                    }
                    break;
                case 'ap_lo':
                    if (value < 40 || value > 200) {
                        isValid = false;
                        message = '‚ö†Ô∏è Diastolic BP should be between 40-200 mmHg';
                    } else if (value < 60 || value > 120) {
                        message = '‚ÑπÔ∏è Consider consulting a doctor if BP is unusual';
                    }
                    break;
            }
            
            // Show error or warning
            if (!isValid || message) {
                input.classList.add(isValid ? 'input-warning' : 'input-error');
                const errorDiv = document.createElement('div');
                errorDiv.className = isValid ? 'validation-warning' : 'validation-error';
                errorDiv.textContent = message;
                input.parentElement.appendChild(errorDiv);
            }
            
            return isValid;
        }
        
        // Add validation listeners on page load
        document.addEventListener('DOMContentLoaded', function() {
            const numericInputs = ['age_years', 'height', 'weight', 'ap_hi', 'ap_lo'];
            numericInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('blur', function() {
                        validateInput(this);
                    });
                    input.addEventListener('input', function() {
                        // Clear error on typing
                        this.classList.remove('input-error', 'input-warning');
                        const error = this.parentElement.querySelector('.validation-error, .validation-warning');
                        if (error) error.remove();
                    });
                }
            });
        });
    </script>
</head>
<body>
    <button id="darkModeToggle" class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode">üåô</button>
    
    <div class="container">
        <h2>Cardiovascular Disease Prediction</h2>
        
        <div style="text-align: center; margin-bottom: 20px;">
            <button type="button" onclick="fillDemoData(1)" class="demo-btn demo-btn-low">
                Fill Low Risk Demo
            </button>
            <button type="button" onclick="fillDemoData(2)" class="demo-btn demo-btn-high">
                Fill High Risk Demo
            </button>
        </div>
        
        {% if error %}
        <div class="error">
            <strong>Error:</strong> {{ error }}
        </div>
        {% endif %}
        
        <form action="/predict" method="POST">
            <div class="form-row">
                <div class="form-group">
                    <label for="age_years" data-tooltip="Your current age in years (1-120)">Age:</label>
                    <input type="number" id="age_years" name="age_years" step="any" 
                           placeholder="e.g., 45" required min="1" max="120">
                    <div class="input-hint">Enter your age in years</div>
                </div>
                
                <div class="form-group">
                    <label for="height" data-tooltip="Your height in centimeters (100-250 cm)">Height:</label>
                    <input type="number" id="height" name="height" step="any" 
                           placeholder="e.g., 170" required min="50" max="250">
                    <div class="input-hint">Enter your height in centimeters (cm)</div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="weight">Weight:</label>
                    <input type="number" id="weight" name="weight" step="any" 
                           placeholder="e.g., 75" required min="20" max="300">
                    <div class="input-hint">Enter your weight in kilograms (kg)</div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="ap_hi">Systolic Blood Pressure (Upper):</label>
                    <input type="number" id="ap_hi" name="ap_hi" step="any" 
                           placeholder="e.g., 120" required min="50" max="300">
                    <div class="input-hint">The top number in your blood pressure reading</div>
                </div>
                
                <div class="form-group">
                    <label for="ap_lo">Diastolic Blood Pressure (Lower):</label>
                    <input type="number" id="ap_lo" name="ap_lo" step="any" 
                           placeholder="e.g., 80" required min="30" max="200">
                    <div class="input-hint">The bottom number in your blood pressure reading</div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="cholesterol">Cholesterol Level:</label>
                    <select id="cholesterol" name="cholesterol" required>
                        <option value="">-- Select your cholesterol level --</option>
                        <option value="1">Normal</option>
                        <option value="2">Above Normal</option>
                        <option value="3">Well Above Normal</option>
                    </select>
                    <div class="input-hint">Based on your recent blood test results</div>
                </div>
                
                <div class="form-group">
                    <label for="gluc">Blood Glucose Level:</label>
                    <select id="gluc" name="gluc" required>
                        <option value="">-- Select your glucose level --</option>
                        <option value="1">Normal</option>
                        <option value="2">Above Normal</option>
                        <option value="3">Well Above Normal</option>
                    </select>
                    <div class="input-hint">Based on your recent blood test results</div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="smoke">Do you smoke?</label>
                    <select id="smoke" name="smoke" required>
                        <option value="">-- Select an option --</option>
                        <option value="0">No, I don't smoke</option>
                        <option value="1">Yes, I smoke</option>
                    </select>
                    <div class="input-hint">Current smoking status</div>
                </div>
                
                <div class="form-group">
                    <label for="alco">Do you consume alcohol?</label>
                    <select id="alco" name="alco" required>
                        <option value="">-- Select an option --</option>
                        <option value="0">No, I don't drink alcohol</option>
                        <option value="1">Yes, I drink alcohol</option>
                    </select>
                    <div class="input-hint">Regular alcohol consumption</div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="active">Do you exercise regularly?</label>
                <select id="active" name="active" required>
                    <option value="">-- Select an option --</option>
                    <option value="0">No, I'm not physically active</option>
                    <option value="1">Yes, I exercise regularly</option>
                </select>
                <div class="input-hint">Regular physical activity (walking, running, sports, gym, etc.)</div>
            </div>
            
            <button type="submit">Predict Risk</button>
        </form>
        
        <div style="text-align: center; margin-top: 30px; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 8px; font-size: 0.85em;">
            <p style="margin: 0; color: #856404;">
                <strong>Disclaimer:</strong> This is an educational prediction tool, not a medical diagnosis. Always consult healthcare professionals for medical advice.
            </p>
        </div>
    </div>
</body>
</html>
